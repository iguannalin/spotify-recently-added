{"version":3,"sources":["logo.svg","App.js","index.js"],"names":["module","exports","Song","props","className","this","track","Component","Songs","state","playlist","getLibrary","getToken","code","URLSearchParams","window","location","search","get","console","log","at","fetch","headers","then","r","json","data","compileList","tracks","setState","items","forEach","item","name","link","href","artists","map","artist","push","App","src","logo","alt","ReactDOM","render","document","getElementById"],"mappings":"+HAAAA,EAAOC,QAAU,IAA0B,kC,4MCIpCC,G,kBACL,WAAYC,GAAQ,qEACZA,I,sEAIN,OACE,yBAAKC,UAAU,SACXC,KAAKF,MAAMG,W,GARDC,cAedC,E,YACJ,WAAYL,GAAQ,IAAD,8BACjB,4CAAMA,KACDM,MAAQ,CACXC,SAAU,IAHK,E,iFAQjBL,KAAKM,WAAWN,KAAKO,c,iCAIrB,IACMC,EADY,IAAIC,gBAAgBC,OAAOC,SAASC,QAC/BC,IAAI,QAE3B,OADAC,QAAQC,IAAI,OAAQP,GACbA,I,iCAGEQ,GAAK,IAAD,OACbF,QAAQC,IAAI,OAAQC,GACpBC,MAAM,gDAAiD,CACnD,+BAAgC,CAC9B,KAAQ,UACR,8BAA+B,KAEjCC,QAAS,CACP,cAAgB,UAAhB,OAA2BF,MAGhCG,MAAK,SAAAC,GAAC,OAAIA,EAAEC,UACZF,MAAK,SAAAG,GAAQ,EAAKC,YAAYD,Q,kCAGrBE,GAAS,IAAD,OAClBxB,KAAKyB,SAAS,CAACpB,SAAU,KACzBS,QAAQC,IAAI,cAAeS,GAEvBA,EAAOE,OACTF,EAAOE,MAAMC,SAAQ,SAAAC,GACnB,IAAM3B,EAAQ,CACZ4B,KAAMD,EAAKC,KACXC,KAAMF,EAAKG,KACXC,QAASJ,EAAKI,QAAQC,KAAI,SAAAC,GAAY,MAAO,CAAEL,KAAMK,EAAOL,KAAMC,KAAMI,EAAOH,UAEjF,EAAKN,SAAS,CACZpB,SAAU,EAAKD,MAAMC,SAAS8B,KAAKlC,U,+BAUzC,OACE,yBAAKF,UAAU,YACb,uBAAGgC,KAAI,UAHU,mKAGjB,QACA,4BACI/B,KAAKI,MAAMC,SAASsB,SACpB,SAAA1B,GACE,OACE,kBAAC,EAAD,CAAMA,MAAOA,a,GA/DTC,aAoFLkC,MAXf,WACE,OACE,yBAAKrC,UAAU,OACb,4BAAQA,UAAU,cAChB,yBAAKsC,IAAKC,IAAMvC,UAAU,WAAWwC,IAAI,UAE3C,kBAAC,EAAD,QC7FNC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.a2569e45.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.930c9814.svg\";","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\n class Song extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"track\">\n        { this.props.track }\n      </div>\n    );\n  }\n}\n\n\nclass Songs extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playlist: []\n    }\n  };\n\n  componentDidMount() {\n    this.getLibrary(this.getToken());\n  }\n\n  getToken() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n    console.log('CODE', code)\n    return code;\n  }\n\n  getLibrary(at) {\n    console.log('CODE', at);\n    fetch(\"https://api.spotify.com/v1/me/tracks?limit=20\", {\n        'Access-Control-Allow-Headers': {\n          'mode': 'no-cors',\n          'access-control-allow-origin': '*'\n        },\n        headers: {\n          'Authorization': `Bearer ${at}`\n        }\n    })\n    .then(r => r.json())\n    .then(data=>{ this.compileList(data); });\n  }\n\n  compileList(tracks) {\n    this.setState({playlist: []});\n    console.log('list tracks', tracks);\n\n    if (tracks.items) {\n      tracks.items.forEach(item => {\n        const track = {\n          name: item.name,\n          link: item.href,\n          artists: item.artists.map(artist => { return { name: artist.name, link: artist.href }})\n        }\n        this.setState({\n          playlist: this.state.playlist.push(track)\n        })}\n      );\n    }\n  }\n\n  render() {\n    const mid = '';\n    const ruri = 'https://iguannalin.github.io/spotify-recently-added/';\n    const authEndpoint = \"https://accounts.spotify.com/authorize?client_id=\"+mid+\"&response_type=code&redirect_uri=\"+ruri+\"&scope=user-library-read\";\n    return (\n      <div className=\"Playlist\">\n        <a href={`${authEndpoint}`}>LINK</a>\n        <ul>\n          { this.state.playlist.forEach(\n            track => {\n              return (\n                <Song track={track}></Song>\n              )\n            }\n          )}\n        </ul>\n      </div>\n    );\n  }\n}\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n      </header>\n      <Songs></Songs>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}