{"version":3,"sources":["Song/Song.js","Songs/Songs.js","Home/Home.js","App.js","index.js"],"names":["Song","props","className","href","this","track","link","name","artists","map","artist","Component","Songs","state","playlist","ruri","endpoints","authorize","mid","getToken","code","ac","encodedBody","window","btoa","ms","console","log","fetch","method","headers","body","then","r","ok","json","data","access_token","getLibrary","at","compileList","tracks","setState","items","forEach","object","item","external_urls","spotify","tempPlaylist","push","authLink","generateAuthLink","index","key","Home","submitted","getCode","bind","handleSubmit","handleUserInput","URLSearchParams","location","search","get","e","preventDefault","event","target","value","onSubmit","type","onChange","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b1abf0ad.chunk.js","sourcesContent":["import React, {Component} from 'react';\n\nclass Song extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"track\">\n                <div className=\"trackTitle\">\n                    <a href={this.props.track.link}>{this.props.track.name}</a>\n                </div>\n                <div className=\"trackArtist\">\n                    {\n                        this.props.track.artists.map(artist => {\n                            return (<a href={artist.link}>{artist.name}</a>);\n                        })\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Song;\n","import React, {Component} from 'react';\nimport Song from '../Song/Song';\n\nclass Songs extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            playlist: [],\n            ruri: 'http://localhost:3000/',\n            endpoints: {\n                authorize: 'https://accounts.spotify.com/authorize'\n            }\n        }\n    };\n\n    generateAuthLink() {\n        return this.state.endpoints.authorize + '?client_id=' + this.props.mid + '&response_type=code&redirect_uri=' + this.state.ruri + '&scope=user-library-read';\n    }\n\n    componentDidMount() {\n        this.getToken(this.props.code);\n    }\n\n    getToken(ac) {\n        const encodedBody = window.btoa(this.props.mid + ':' + this.props.ms);\n        console.log('CODE', ac);\n\n        fetch('https://accounts.spotify.com/api/token', {\n            method: 'POST',\n            'Access-Control-Allow-Headers': {\n                'mode': 'no-cors',\n                'access-control-allow-origin': '*'\n            },\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'Authorization': `Basic ${encodedBody}`\n            },\n            body: `grant_type=authorization_code&code=${ac}&redirect_uri=${this.state.ruri}`,\n        })\n            .then(r => {\n                if (r.ok) return r.json()\n            })\n            .then(data => {\n                if (data && data.access_token) this.getLibrary(data.access_token)\n            });\n    }\n\n    getLibrary(at) {\n        console.log('TOKEN', at);\n        fetch('https://api.spotify.com/v1/me/tracks?limit=20', {\n            'Access-Control-Allow-Headers': {\n                'mode': 'no-cors',\n                'access-control-allow-origin': '*'\n            },\n            headers: {\n                'Authorization': `Bearer ${at}`\n            }\n        })\n            .then(r => {\n                if (r.ok) {\n                    return r.json();\n                } else {\n                    console.log('Error: getLibrary');\n                    return;\n                }\n            })\n            .then(data => {\n                if (data) this.compileList(data);\n            });\n    }\n\n    compileList(tracks) {\n        this.setState(() => {\n            return {playlist: []}\n        });\n\n        if (tracks && tracks.items) {\n            tracks.items.forEach(object => {\n                    const item = object.track;\n                    const track = {\n                        name: item.name,\n                        link: item.external_urls.spotify,\n                        artists: item.artists.map(artist => {\n                            return {name: artist.name, link: artist.external_urls.spotify}\n                        })\n                    };\n                    const tempPlaylist = this.state.playlist;\n                    tempPlaylist.push(track);\n                    this.setState(() => {\n                        return {\n                            playlist: tempPlaylist\n                        }\n                    })\n                }\n            );\n        }\n    }\n\n    render() {\n        const authLink = this.generateAuthLink();\n        console.log('LINK ', authLink);\n        return (\n            <div className=\"Playlist\">\n                <a href={authLink}>LINK</a>\n                <ul>\n                    {this.state.playlist.map(\n                        (track, index)=> {\n                            return (\n                                <li key={index}><Song track={track}></Song></li>\n                            )\n                        }\n                    )\n                    }\n                </ul>\n            </div>\n        );\n    }\n}\n\nexport default Songs;\n","import React, {Component} from 'react';\nimport Songs from '../Songs/Songs';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            mid: '',\n            ms: '',\n            code: '',\n            submitted: false\n        };\n\n        this.getCode = this.getCode.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleUserInput = this.handleUserInput.bind(this);\n    }\n\n    componentDidMount() {\n        this.getCode();\n    }\n\n\n    getCode() {\n        const urlParams = new URLSearchParams(window.location.search);\n        const code = urlParams.get('code');\n        this.setState({\n            code: code,\n            submitted: !!(code)\n        });\n    }\n\n    handleSubmit(e) {\n        console.log('SUBMITTED');\n        if (e) {\n            e.preventDefault();\n        }\n        this.setState({\n            submitted: true\n        });\n    }\n\n    handleUserInput(event) {\n        if (event.target.name === 'mid') {\n            this.setState({\n                mid: event.target.value\n            })\n        } else if (event.target.name === 'ms') {\n            this.setState({\n                ms: event.target.value\n            })\n        }\n    }\n\n    render() {\n        if (this.state.mid && this.state.ms && this.state.submitted) {\n            return (\n                <div className=\"Home\">\n                    <Songs mid={this.state.mid} ms={this.state.ms} code={this.state.code}></Songs>\n                </div>\n            )\n        } else {\n            return (\n                <div className=\"project-form\">\n                    <div className=\"project-form card\">\n                        <h2>To use this app, enter your client ID & secret here:</h2>\n                        <form onSubmit={this.handleSubmit}>\n                            <div>\n                                <label>Client ID:\n                                    <input type=\"text\" name=\"mid\" onChange={this.handleUserInput}/></label>\n                            </div>\n                            <div>\n                                <label>Secret:\n                                    <input type=\"text\" name=\"ms\" onChange={this.handleUserInput}/></label>\n                            </div>\n                            <div className=\"project-form buttons\">\n                                <input type=\"submit\" value=\"Submit\"/>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            )\n        }\n    }\n}\n\nexport default Home\n","import React from 'react';\nimport './App.css';\nimport Home from './Home/Home';\n\nfunction App() {\n    return (\n        <div className=\"App\">\n            <Home></Home>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}