{"version":3,"sources":["Track/Track.js","Playlist/Playlist.js","Home/Home.js","App.js","index.js"],"names":["Track","className","alt","this","props","track","name","artists","src","albumArt","url","href","link","map","artist","index","key","Component","Playlist","state","code","playlist","playlistURI","ruri","userID","at","playlistCreated","playlistCreatedLink","endpoints","authorize","token","users","links","authLink","tracksSelectOptions","numberOfTracks","sessionStorage","getItem","getLibrary","bind","getToken","getUserID","generateAuthLink","addTracksToPlaylist","createPlaylist","createConfetti","getCode","handleSelect","console","log","URLSearchParams","window","location","search","get","setState","setItem","scopes","encodeURIComponent","mid","ac","refreshToken","grantType","codeType","encodedBody","btoa","ms","fetch","method","headers","body","then","r","ok","json","removeItem","error","data","access_token","refresh_token","toString","compileList","tracks","items","forEach","object","item","external_urls","spotify","album","images","tempPlaylist","tempPlaylistURI","push","uri","trace","month","Date","toDateString","split","snapshotID","id","playlistID","JSON","stringify","status","message","snapshot_id","deg","radius","radians","Math","PI","sin","cos","i","colors","round","length","container","document","getElementById","innerHTML","elem","createElement","random","x","getCircleY","y","getCircleX","coord","style","webkitTransform","width","height","classList","add","backgroundColor","getColor","webkitTranslate","appendChild","visibility","e","target","value","onChange","selected","onMouseEnter","onClick","Home","submitted","retrieve","handleSubmit","handleUserInput","preventDefault","event","onSubmit","type","App","ReactDOM","render"],"mappings":"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","file":"static/js/main.e17a3a95.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport './Track.scss';\n\nclass Track extends Component {\n    render() {\n        return (\n            <span className=\"Track\">\n                <span className=\"track-image-small\">\n                    <img alt={'Album cover of ' + this.props.track.name + ' by ' + this.props.track.artists[0].name}\n                         src={this.props.track.albumArt[1].url}/>\n                </span>\n                <span className=\"track-details\">\n                    <h2 className=\"track-title\">\n                        <a href={this.props.track.link}>{this.props.track.name}</a>\n                    </h2>\n                    <p className=\"track-artist\">\n                        {\n                            this.props.track.artists.map((artist, index) => {\n                                return (<a href={artist.link} key={index}>\n                                    { index > 0 ? (', ') : ('') } {artist.name}\n                                </a>);\n                            })\n                        }\n                    </p>\n                </span>\n            </span>\n        );\n    }\n}\n\nexport default Track;\n","import React, {Component} from 'react';\nimport Track from '../Track/Track';\nimport './Playlist.scss';\n\n// TODO Generate a playlist for user, and add custom playlist cover\nclass Playlist extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            code: '',\n            playlist: [],\n            playlistURI: [],\n            ruri: 'http://localhost:9008/',\n            userID: '',\n            at: '',\n            playlistCreated: false,\n            playlistCreatedLink: '',\n            endpoints: {\n                authorize: 'https://accounts.spotify.com/authorize',\n                token: 'https://accounts.spotify.com/api/token',\n                users: 'https://api.spotify.com/v1/'\n            },\n            links: {\n                authLink: ''\n            },\n            tracksSelectOptions: [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50],\n            numberOfTracks: sessionStorage.getItem('numTracks') || 20\n        };\n        this.getLibrary = this.getLibrary.bind(this);\n        this.getToken = this.getToken.bind(this);\n        this.getUserID = this.getUserID.bind(this);\n        this.generateAuthLink = this.generateAuthLink.bind(this);\n        this.addTracksToPlaylist = this.addTracksToPlaylist.bind(this);\n        this.createPlaylist = this.createPlaylist.bind(this);\n        this.createConfetti = this.createConfetti.bind(this);\n        this.getCode = this.getCode.bind(this);\n        this.handleSelect = this.handleSelect.bind(this);\n    };\n\n    componentDidMount() {\n        this.generateAuthLink();\n        this.getToken(this.getCode());\n        console.log('NUMBEROFTRACKS ON INIT', this.state.numberOfTracks);\n    }\n\n    getCode() {\n        const urlParams = new URLSearchParams(window.location.search);\n        const code = urlParams.get('code');\n        console.log('CODEEE', code);\n        this.setState({\n            code: code\n        });\n        sessionStorage.setItem('mcode', code);\n        return code;\n    }\n\n    generateAuthLink() {\n        const scopes = encodeURIComponent('user-library-read playlist-modify-private');\n        this.setState({\n            links: {\n                authLink: (this.state.endpoints.authorize + '?client_id=' + this.props.mid + '&response_type=code&redirect_uri=' + this.state.ruri + '&scope=' + scopes)\n            }\n        });\n    }\n\n    getToken(ac) {\n        const refreshToken = sessionStorage.getItem('mtoken');\n        let grantType = 'authorization_code';\n        let codeType = 'code';\n        console.log('HERE MTOKEN', refreshToken, typeof refreshToken, 'TOKEN PROP', ac);\n        if (refreshToken && refreshToken !== \"undefined\") {\n            console.log('REFRESH TOKEN EXISTS', refreshToken);\n            this.setState({at: refreshToken});\n            ac = refreshToken;\n            grantType = 'refresh_token';\n            codeType = 'refresh_token';\n        }\n\n        const encodedBody = window.btoa(this.props.mid + ':' + this.props.ms);\n        console.log('CODE', ac);\n        fetch(this.state.endpoints.token, {\n            method: 'POST',\n            'Access-Control-Allow-Headers': {\n                'mode': 'no-cors',\n                'access-control-allow-origin': '*'\n            },\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'Authorization': `Basic ${encodedBody}`\n            },\n            body: `grant_type=${grantType}&${codeType}=${ac}&redirect_uri=${this.state.ruri}`,\n        })\n            .then(r => {\n                if (r.ok) return r.json();\n                else {\n                    sessionStorage.removeItem('mcode');\n                    console.error('Error: getToken');\n                }\n            })\n            .then(data => {\n                if (data && data.access_token) {\n                    this.setState({\n                        at: data.access_token\n                    });\n                    console.log('GETTOKEN ACCESSTOKEN', data.access_token, ' REFRESH TOKEN ', data.refresh_token);\n                    if (data.refresh_token) sessionStorage.setItem('mtoken', data.refresh_token);\n                    this.getLibrary();\n                }\n            });\n\n    }\n\n    getLibrary() {\n        console.log('get library TOKEN', this.state.at, 'NUM TRACKS', this.state.numberOfTracks);\n        fetch('https://api.spotify.com/v1/me/tracks?limit=' + this.state.numberOfTracks.toString(), {\n            'Access-Control-Allow-Headers': {\n                'mode': 'no-cors',\n                'access-control-allow-origin': '*'\n            },\n            headers: {\n                'Authorization': `Bearer ${this.state.at}`\n            }\n        })\n            .then(r => {\n                if (r.ok) return r.json(); else {\n                    console.error('Error: getLibrary', r);\n                    sessionStorage.removeItem('mtoken');\n                }\n            })\n            .then(data => {\n                if (data) this.compileList(data);\n            })\n            .then(() => {\n                this.getUserID();\n            });\n    }\n\n    compileList(tracks) {\n        this.setState(() => {\n            return {playlist: []}\n        });\n        if (tracks && tracks.items) {\n            tracks.items.forEach(object => {\n                    const item = object.track;\n                    const track = {\n                        name: item.name,\n                        link: item.external_urls.spotify,\n                        artists: item.artists.map(artist => {\n                            return {name: artist.name, link: artist.external_urls.spotify}\n                        }),\n                        albumArt: item.album.images\n                    };\n                    // console.log('TRACK', track);\n                    const tempPlaylist = this.state.playlist;\n                    const tempPlaylistURI = this.state.playlistURI;\n                    tempPlaylist.push(track);\n                    tempPlaylistURI.push(item.uri);\n                    this.setState({\n                        playlist: tempPlaylist,\n                        playlistURI: tempPlaylistURI\n                    })\n                }\n            );\n        }\n    }\n\n    createPlaylist() {\n        console.trace();\n        const d = new Date();\n        const month = d.toDateString().split(' ')[1];\n        const snapshotID = sessionStorage.getItem('playlistSnapshot');\n        console.log('MEOW');\n        if (snapshotID) {\n            this.addTracksToPlaylist(snapshotID);\n        } else {\n            fetch(this.state.endpoints.users + 'users/' + this.state.userID + '/playlists', {\n                method: 'POST',\n                'Access-Control-Allow-Headers': {\n                    'mode': 'no-cors',\n                    'access-control-allow-origin': '*'\n                },\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${this.state.at}`\n                },\n                body: `{\"name\":\"` + month + ` - Recently Added\",\"public\":false,\"description\":\"Created with love by Anna at https://iguannalin.github.io/spotify-recently-added/\"}`\n            })\n                .then(r => {\n                    if (r.ok) return r.json();\n                    else console.error('Error: createPlaylist');\n                })\n                .then(data => {\n                    if (data) {\n                        this.addTracksToPlaylist(data.id);\n                        console.log('CREATED LINK', data);\n                        this.setState({\n                            playlistCreatedLink: data.external_urls['spotify']\n                        });\n                    }\n                });\n        }\n    }\n\n    addTracksToPlaylist(playlistID) {\n        console.log('addtracksto', playlistID);\n        fetch(this.state.endpoints.users + 'playlists/' + playlistID + '/tracks', {\n            method: 'POST',\n            'Access-Control-Allow-Headers': {\n                'mode': 'no-cors',\n                'access-control-allow-origin': '*'\n            },\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${this.state.at}`\n            },\n            body: `{\"uris\":${JSON.stringify(this.state.playlistURI)}}`\n        })\n            .then(r => r.json())\n            .then(data => {\n                if (data.error && data.error.status >= 400 && data.error.message === 'Invalid playlist Id') {\n                    sessionStorage.removeItem('playlistSnapshot');\n                    this.createPlaylist();\n                } else if (data) {\n                    sessionStorage.setItem('playlistSnapshot', data.snapshot_id);\n                    this.setState({playlistCreated: true})\n                }\n            });\n    }\n\n    getUserID() {\n        console.log('AT', this.state.at);\n        fetch((this.state.endpoints.users + 'me'), {\n            'Access-Control-Allow-Headers': {\n                'mode': 'no-cors',\n                'access-control-allow-origin': '*'\n            },\n            headers: {\n                'Authorization': `Bearer ${this.state.at}`\n            }\n        })\n            .then(r => {\n                if (r.ok) return r.json();\n                else console.error('Error: getUserID');\n            })\n            .then(data => {\n                    if (data) {\n                        this.setState({userID: data.id});\n                        console.log('USER ID', data);\n                    }\n                }\n            );\n    }\n\n    getCircleX(deg, radius) {\n        const radians = deg * (Math.PI / 180);\n        return Math.sin(radians) * radius;\n    }\n\n    getCircleY(deg, radius) {\n        const radians = deg * (Math.PI / 180);\n        return Math.cos(radians) * radius;\n    }\n\n    getColor(i) {\n        const colors = ['rgb(108, 220, 254)', 'rgb(55, 223, 159)', 'rgb(104, 74, 179)', 'rgb(245, 163, 199)', 'rgb(242, 107, 60)', 'rgb(241, 80, 98)', 'rgb(254, 253, 223)', 'rgb(105, 192, 123)',\n            'rgb(183, 124, 168)'];\n        const color = Math.round(i) % (colors.length);\n        return (colors[color]);\n    }\n\n    createConfetti() {\n        console.log('CREATE CONFETTI');\n        const container = document.getElementById('confetti-container');\n        container.innerHTML = '';\n        for (let i = 1; i <= 360; i += 30) {\n            const elem = document.createElement('span');\n            const r = (Math.random() * 7) + 5;\n            const radius = 100;\n            const x = Math.round(this.getCircleY(i, radius)).toString() + 'px';\n            const y = Math.round(this.getCircleX(i, radius)).toString() + 'px';\n            const coord = 'translate(' + x.toString() + ',' + y.toString() + ')';\n            elem.style.webkitTransform = coord;\n            elem.style.width = r.toString() + 'px';\n            elem.style.height = r.toString() + 'px';\n            elem.classList.add('confetti');\n            elem.style.backgroundColor = this.getColor(i / 30);\n            elem.style.webkitTranslate = 'transform 5s linear ease-in-out';\n            container.appendChild(elem);\n        }\n        container.style.visibility = 'visible';\n    }\n\n    handleSelect(e) {\n        this.setState({numberOfTracks: e.target.value});\n        sessionStorage.setItem('numTracks', e.target.value);\n\n        if (this.state.at) this.getLibrary();\n        console.log('MEOW SELECTED', this.state.numberOfTracks, 'sess', sessionStorage.getItem('numTracks'), ' tar ', e.target.value);\n    }\n\n    render() {\n        return (\n            <div className={this.state.playlist.length > 0 ? 'Playlist home' : 'Playlist center-display'}>\n                {this.state.playlist.length > 0 ? (\n                    <h1 className=\"header playlist-h1\">Here is a list of your\n                        <span className=\"option-select\">\n                            <select name=\"Select up to which recent tracks you would like to view\"\n                                    onChange={this.handleSelect}>\n                                {this.state.tracksSelectOptions.map((i) => {\n                                    return (<option value={i}\n                                                    selected={i.toString() === this.state.numberOfTracks}>{i}</option>);\n                                })}\n                            </select>\n                        </span>\n                        most recently added tracks:</h1>) : (\n                    <h1 className=\"header\">See your Spotify\n                        <span className=\"option-select\">\n                            <select name=\"Select up to which recent tracks you would like to view\"\n                                    onChange={this.handleSelect}>\n                                {this.state.tracksSelectOptions.map((i) => {\n                                    return (<option value={i} selected={i === this.state.numberOfTracks}>{i}</option>);\n                                })}\n                            </select>\n                        </span>Recently Added tracks, and make it into a playlist</h1>)}\n                {this.state.playlist.length > 0 ? (\n                    <span>\n                        <ul className=\"playlist-container\">\n                                {this.state.playlist.map(\n                                    (track, index) => {\n                                        return (\n                                            <li key={index}><Track track={track}/></li>\n                                        )\n                                    }\n                                )}\n                        </ul>\n                        <div className=\"button-div position-mid-right\">\n                            {this.state.playlistCreated ? (\n                                    <a className=\"button-link\" onMouseEnter={this.createConfetti}\n                                       href={this.state.playlistCreatedLink}\n                                       target=\"_blank\"><span>Go to playlist<span id=\"confetti-container\"/></span></a>) :\n                                (<button className=\"button-link\" onClick={this.createPlaylist}>Create this playlist on\n                                    Spotify for me\n                                </button>)\n                            }\n                        </div>\n                    </span>) : (\n                    <span>\n                        <div className=\"button-div margin-top\"><a href={this.state.links.authLink}>Click on me to authorize\n                            Spotify</a>\n                        </div>\n                    </span>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default Playlist;\n","import React, {Component} from 'react';\nimport Playlist from '../Playlist/Playlist';\n\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            mid: '6dc15fdee3cc4723b9f2a422b7f35305',\n            ms: 'a577356d88d340828944780fc72e6749',\n            code: '',\n            submitted: false\n        };\n\n        this.retrieve = this.retrieve.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleUserInput = this.handleUserInput.bind(this);\n    }\n\n    componentDidMount() {\n        this.retrieve();\n    }\n\n    retrieve() {\n        // TODO: implement a reset sessionStorage, in case user wants to change ID\n        if (!this.state.mid && sessionStorage.getItem('mid')) {\n            this.setState({\n                mid: sessionStorage.getItem('mid'),\n                ms: sessionStorage.getItem('ms')\n            });\n        }\n    }\n\n    handleSubmit(e) {\n        if (e) {\n            e.preventDefault();\n        }\n        this.setState({\n            submitted: true\n        });\n    }\n\n    handleUserInput(event) {\n        if (event.target.name === 'mid') {\n            this.setState({\n                mid: event.target.value\n            });\n            sessionStorage.setItem('mid', event.target.value);\n        } else if (event.target.name === 'ms') {\n            this.setState({\n                ms: event.target.value\n            });\n            sessionStorage.setItem('ms', event.target.value);\n        }\n    }\n\n    render() {\n        if ((this.state.mid && this.state.ms) || (this.state.submitted || this.state.code)) {\n            return (\n                <div className=\"Home\">\n                    <Playlist mid={this.state.mid} ms={this.state.ms} code={this.state.code}/>\n                </div>\n            )\n        } else {\n            return (\n                <div className=\"login-form\">\n                    <div className=\"login-form card\">\n                        <h2>To use this app, enter your client ID & secret here:</h2>\n                        <form onSubmit={this.handleSubmit}>\n                            <div>\n                                <label>Client ID:\n                                    <input type=\"text\" name=\"mid\" onChange={this.handleUserInput}/></label>\n                            </div>\n                            <div>\n                                <label>Secret:\n                                    <input type=\"text\" name=\"ms\" onChange={this.handleUserInput}/></label>\n                            </div>\n                            <div className=\"login-form buttons\">\n                                <input type=\"submit\" value=\"Submit\"/>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            )\n        }\n    }\n}\n\nexport default Home\n","import React from 'react';\nimport './App.css';\nimport Home from './Home/Home';\n\nfunction App() {\n    return (\n        <div className=\"App\">\n            <Home/>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}