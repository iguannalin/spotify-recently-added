{"version":3,"sources":["logo.svg","App.js","index.js"],"names":["module","exports","Song","props","className","href","this","track","link","name","artists","map","artist","Component","Songs","state","playlist","getToken","getCode","URLSearchParams","window","location","search","get","ac","console","log","fetch","method","body","headers","then","r","ok","json","data","access_token","getLibrary","at","compileList","tracks","setState","items","forEach","object","item","tempPlaylist","push","App","src","logo","alt","ReactDOM","render","document","getElementById"],"mappings":"+HAAAA,EAAOC,QAAU,IAA0B,kC,4MCIpCC,G,kBACL,WAAYC,GAAQ,qEACZA,I,sEAIN,OACE,yBAAKC,UAAU,SACb,yBAAKA,UAAU,cACb,uBAAGC,KAAMC,KAAKH,MAAMI,MAAMC,MAAOF,KAAKH,MAAMI,MAAME,OAEpD,yBAAKL,UAAU,eAEXE,KAAKH,MAAMI,MAAMG,QAAQC,KAAI,SAAAC,GAC3B,OAAQ,uBAAGP,KAAMO,EAAOJ,MAAOI,EAAOH,e,GAdhCI,cAwBdC,E,YACJ,WAAYX,GAAQ,IAAD,8BACjB,4CAAMA,KACDY,MAAQ,CACXC,SAAU,IAHK,E,iFAQjBV,KAAKW,SAASX,KAAKY,a,gCAKnB,OADkB,IAAIC,gBAAgBC,OAAOC,SAASC,QACrCC,IAAI,U,+BAGdC,GAAK,IAAD,OAGXC,QAAQC,IAAI,OAAQF,GAEpBG,MAAM,yCAA0C,CAC9CC,OAAQ,OACR,+BAAgC,CAC9B,KAAQ,UACR,8BAA+B,KAEjCC,KAAK,sCAAD,OAAwCL,EAAxC,yBATO,wDAUXM,QAAS,CACP,eAAgB,uCAGnBC,MAAK,SAAAC,GAAO,GAAIA,EAAEC,GAAI,OAAOD,EAAEE,UAC/BH,MAAK,SAAAI,GAAcA,GAAQA,EAAKC,cAAc,EAAKC,WAAWF,EAAKC,mB,iCAI3DE,GAAK,IAAD,OACbb,QAAQC,IAAI,QAASY,GACrBX,MAAM,gDAAiD,CACnD,+BAAgC,CAC9B,KAAQ,UACR,8BAA+B,KAEjCG,QAAS,CACP,cAAgB,UAAhB,OAA2BQ,MAGhCP,MAAK,SAAAC,GACJ,OAAIA,EAAEC,GACGD,EAAEE,YAGTT,QAAQC,IAAI,wBAIfK,MAAK,SAAAI,GAAcA,GAAM,EAAKI,YAAYJ,Q,kCAGjCK,GAAS,IAAD,OAClBlC,KAAKmC,UAAS,SAAC1B,GAAY,MAAO,CAACC,SAAU,OAC7CS,QAAQC,IAAI,cAAec,GAEvBA,GAAUA,EAAOE,OACnBF,EAAOE,MAAMC,SAAQ,SAAAC,GACnB,IAAMC,EAAOD,EAAOrC,MACpBkB,QAAQC,IAAI,oBAAqBmB,GACjC,IAAMtC,EAAQ,CACZE,KAAMoC,EAAKpC,KACXD,KAAMqC,EAAKxC,KACXK,QAASmC,EAAKnC,QAAQC,KAAI,SAAAC,GAAY,MAAO,CAAEH,KAAMG,EAAOH,KAAMD,KAAMI,EAAOP,UAE3EyC,EAAe,EAAK/B,MAAMC,SAChC8B,EAAaC,KAAKxC,GAClB,EAAKkC,UAAS,SAAC1B,GAAW,MAAO,CAC/BC,SAAU8B,W,+BAUhB,OACE,yBAAK1C,UAAU,YACb,uBAAGC,KAAI,UAHU,mKAGjB,QACA,4BAEMC,KAAKS,MAAMC,SAASL,KACpB,SAAAJ,GACE,OACE,kBAAC,EAAD,CAAMA,MAAOA,a,GA/FXM,aAqHLmC,MAXf,WACE,OACE,yBAAK5C,UAAU,OACb,4BAAQA,UAAU,cAChB,yBAAK6C,IAAKC,IAAM9C,UAAU,WAAW+C,IAAI,UAE3C,kBAAC,EAAD,QCvINC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.dec98fc2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.930c9814.svg\";","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\n class Song extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"track\">\n        <div className=\"trackTitle\">\n          <a href={this.props.track.link}>{this.props.track.name}</a>\n        </div>\n        <div className=\"trackArtist\">\n          {\n            this.props.track.artists.map(artist => {\n              return (<a href={artist.link}>{artist.name}</a>);\n            })\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nclass Songs extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playlist: []\n    }\n  };\n\n  componentDidMount() {\n    this.getToken(this.getCode());\n  }\n\n  getCode() {\n    const urlParams = new URLSearchParams(window.location.search);\n    return urlParams.get('code');\n  }\n\n  getToken(ac) {\n    const encodedAC = '';\n    const ruri = 'https://iguannalin.github.io/spotify-recently-added/';\n    console.log('CODE', ac);\n\n    fetch('https://accounts.spotify.com/api/token', {\n      method: 'POST',\n      'Access-Control-Allow-Headers': {\n        'mode': 'no-cors',\n        'access-control-allow-origin': '*'\n      },\n      body: `grant_type=authorization_code&code=${ac}&redirect_uri=${ruri}`,\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      }\n    })\n    .then(r => { if (r.ok) return r.json() })\n    .then(data => { if (data && data.access_token) this.getLibrary(data.access_token) });\n    return;\n  }\n\n  getLibrary(at) {\n    console.log('TOKEN', at);\n    fetch('https://api.spotify.com/v1/me/tracks?limit=20', {\n        'Access-Control-Allow-Headers': {\n          'mode': 'no-cors',\n          'access-control-allow-origin': '*'\n        },\n        headers: {\n          'Authorization': `Bearer ${at}`\n        }\n    })\n    .then(r => {\n      if (r.ok) {\n        return r.json();\n      }\n      else {\n        console.log('Error: getLibrary');\n        return;\n      }\n    })\n    .then(data => { if (data) this.compileList(data); });\n  }\n\n  compileList(tracks) {\n    this.setState((state) => { return {playlist: []} });\n    console.log('list tracks', tracks);\n\n    if (tracks && tracks.items) {\n      tracks.items.forEach(object => {\n        const item = object.track;\n        console.log('COMPILE LISTTRACK', item);\n        const track = {\n          name: item.name,\n          link: item.href,\n          artists: item.artists.map(artist => { return { name: artist.name, link: artist.href }})\n        }\n        const tempPlaylist = this.state.playlist;\n        tempPlaylist.push(track);\n        this.setState((state) => {return {\n          playlist: tempPlaylist\n        }})}\n      );\n    }\n  }\n\n  render() {\n    const mid = '';\n    const ruri = 'https://iguannalin.github.io/spotify-recently-added/';\n    const authEndpoint = \"https://accounts.spotify.com/authorize?client_id=\"+mid+\"&response_type=code&redirect_uri=\"+ruri+\"&scope=user-library-read\";\n    return (\n      <div className=\"Playlist\">\n        <a href={`${authEndpoint}`}>LINK</a>\n        <ul>\n          {\n              this.state.playlist.map(\n              track => {\n                return (\n                  <Song track={track}></Song>\n                )\n              }\n            )\n          }\n        </ul>\n      </div>\n    );\n  }\n}\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n      </header>\n      <Songs></Songs>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}