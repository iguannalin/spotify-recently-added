{"version":3,"sources":["logo.svg","App.js","index.js"],"names":["module","exports","Song","props","className","href","this","track","link","name","artists","map","artist","Component","Songs","state","playlist","ruri","mid","ms","endpoints","authorize","getToken","getCode","URLSearchParams","window","location","search","get","ac","encodedBody","btoa","console","log","fetch","method","headers","body","then","r","ok","json","data","access_token","getLibrary","at","compileList","tracks","setState","items","forEach","object","item","tempPlaylist","push","authLink","generateAuthLink","App","src","logo","alt","ReactDOM","render","document","getElementById"],"mappings":"+HAAAA,EAAOC,QAAU,IAA0B,kC,4MCIpCC,G,kBACL,WAAYC,GAAQ,qEACZA,I,sEAIN,OACE,yBAAKC,UAAU,SACb,yBAAKA,UAAU,cACb,uBAAGC,KAAMC,KAAKH,MAAMI,MAAMC,MAAOF,KAAKH,MAAMI,MAAME,OAEpD,yBAAKL,UAAU,eAEXE,KAAKH,MAAMI,MAAMG,QAAQC,KAAI,SAAAC,GAC3B,OAAQ,uBAAGP,KAAMO,EAAOJ,MAAOI,EAAOH,e,GAdhCI,cAwBdC,E,YACJ,WAAYX,GAAQ,IAAD,8BACjB,4CAAMA,KACDY,MAAQ,CACXC,SAAU,GACVC,KAAM,uDACNC,IAAK,mCACLC,GAAI,mCACJC,UAAW,CACTC,UAAW,2CARE,E,gFAcjB,OAAOf,KAAKS,MAAMK,UAAUC,UAAY,cAAgBf,KAAKS,MAAMG,IAAM,oCAAoCZ,KAAKS,MAAME,KAAK,6B,0CAI7HX,KAAKgB,SAAShB,KAAKiB,a,gCAKnB,OADkB,IAAIC,gBAAgBC,OAAOC,SAASC,QACrCC,IAAI,U,+BAGdC,GAAK,IAAD,OACLC,EAAcL,OAAOM,KAAKzB,KAAKS,MAAMG,IAAI,IAAIZ,KAAKS,MAAMI,IAC9Da,QAAQC,IAAI,OAAQJ,GAEpBK,MAAM,yCAA0C,CAC9CC,OAAQ,OACR,+BAAgC,CAC9B,KAAQ,UACR,8BAA+B,KAEjCC,QAAS,CACP,eAAgB,oCAChB,cAAgB,SAAhB,OAA0BN,IAE5BO,KAAK,sCAAD,OAAwCR,EAAxC,yBAA2DvB,KAAKS,MAAME,QAE3EqB,MAAK,SAAAC,GAAO,GAAIA,EAAEC,GAAI,OAAOD,EAAEE,UAC/BH,MAAK,SAAAI,GAAcA,GAAQA,EAAKC,cAAc,EAAKC,WAAWF,EAAKC,mB,iCAI3DE,GAAK,IAAD,OACbb,QAAQC,IAAI,QAASY,GACrBX,MAAM,gDAAiD,CACnD,+BAAgC,CAC9B,KAAQ,UACR,8BAA+B,KAEjCE,QAAS,CACP,cAAgB,UAAhB,OAA2BS,MAGhCP,MAAK,SAAAC,GACJ,OAAIA,EAAEC,GACGD,EAAEE,YAGTT,QAAQC,IAAI,wBAIfK,MAAK,SAAAI,GAAcA,GAAM,EAAKI,YAAYJ,Q,kCAGjCK,GAAS,IAAD,OAClBzC,KAAK0C,UAAS,SAACjC,GAAY,MAAO,CAACC,SAAU,OAEzC+B,GAAUA,EAAOE,OACnBF,EAAOE,MAAMC,SAAQ,SAAAC,GACnB,IAAMC,EAAOD,EAAO5C,MACdA,EAAQ,CACZE,KAAM2C,EAAK3C,KACXD,KAAM4C,EAAK/C,KACXK,QAAS0C,EAAK1C,QAAQC,KAAI,SAAAC,GAAY,MAAO,CAAEH,KAAMG,EAAOH,KAAMD,KAAMI,EAAOP,UAE3EgD,EAAe,EAAKtC,MAAMC,SAChCqC,EAAaC,KAAK/C,GAClB,EAAKyC,UAAS,SAACjC,GAAW,MAAO,CAC/BC,SAAUqC,W,+BAOhB,IAAME,EAAWjD,KAAKkD,mBAEtB,OADAxB,QAAQC,IAAI,QAASsB,GAEnB,yBAAKnD,UAAU,YACb,uBAAGC,KAAMkD,GAAT,QACA,4BACIjD,KAAKS,MAAMC,SAASL,KAClB,SAAAJ,GACE,OACE,kBAAC,EAAD,CAAMA,MAAOA,a,GArGXM,aA2HL4C,MAXf,WACE,OACE,yBAAKrD,UAAU,OACb,4BAAQA,UAAU,cAChB,yBAAKsD,IAAKC,IAAMvD,UAAU,WAAWwD,IAAI,UAE3C,kBAAC,EAAD,QC7INC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.c4f44492.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.930c9814.svg\";","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\n class Song extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"track\">\n        <div className=\"trackTitle\">\n          <a href={this.props.track.link}>{this.props.track.name}</a>\n        </div>\n        <div className=\"trackArtist\">\n          {\n            this.props.track.artists.map(artist => {\n              return (<a href={artist.link}>{artist.name}</a>);\n            })\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\n\nclass Songs extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      playlist: [],\n      ruri: 'https://iguannalin.github.io/spotify-recently-added/',\n      mid: '6dc15fdee3cc4723b9f2a422b7f35305',\n      ms: 'a577356d88d340828944780fc72e6749',\n      endpoints: {\n        authorize: 'https://accounts.spotify.com/authorize'\n      }\n    }\n  };\n\n  generateAuthLink() {\n    return this.state.endpoints.authorize + '?client_id=' + this.state.mid + '&response_type=code&redirect_uri='+this.state.ruri+'&scope=user-library-read';\n  }\n\n  componentDidMount() {\n    this.getToken(this.getCode());\n  }\n\n  getCode() {\n    const urlParams = new URLSearchParams(window.location.search);\n    return urlParams.get('code');\n  }\n\n  getToken(ac) {\n    const encodedBody = window.btoa(this.state.mid+':'+this.state.ms);\n    console.log('CODE', ac);\n\n    fetch('https://accounts.spotify.com/api/token', {\n      method: 'POST',\n      'Access-Control-Allow-Headers': {\n        'mode': 'no-cors',\n        'access-control-allow-origin': '*'\n      },\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Authorization': `Basic ${encodedBody}` \n      },\n      body: `grant_type=authorization_code&code=${ac}&redirect_uri=${this.state.ruri}`,\n    })\n    .then(r => { if (r.ok) return r.json() })\n    .then(data => { if (data && data.access_token) this.getLibrary(data.access_token) });\n    return;\n  }\n\n  getLibrary(at) {\n    console.log('TOKEN', at);\n    fetch('https://api.spotify.com/v1/me/tracks?limit=20', {\n        'Access-Control-Allow-Headers': {\n          'mode': 'no-cors',\n          'access-control-allow-origin': '*'\n        },\n        headers: {\n          'Authorization': `Bearer ${at}`\n        }\n    })\n    .then(r => {\n      if (r.ok) {\n        return r.json();\n      }\n      else {\n        console.log('Error: getLibrary');\n        return;\n      }\n    })\n    .then(data => { if (data) this.compileList(data); });\n  }\n\n  compileList(tracks) {\n    this.setState((state) => { return {playlist: []} });\n\n    if (tracks && tracks.items) {\n      tracks.items.forEach(object => {\n        const item = object.track;\n        const track = {\n          name: item.name,\n          link: item.href,\n          artists: item.artists.map(artist => { return { name: artist.name, link: artist.href }})\n        }\n        const tempPlaylist = this.state.playlist;\n        tempPlaylist.push(track);\n        this.setState((state) => {return {\n          playlist: tempPlaylist\n        }})}\n      );\n    }\n  }\n\n  render() {\n    const authLink = this.generateAuthLink();\n    console.log('LINK ', authLink);\n    return (\n      <div className=\"Playlist\">\n        <a href={authLink}>LINK</a>\n        <ul>\n          { this.state.playlist.map(\n              track => {\n                return (\n                  <Song track={track}></Song>\n                )\n              }\n            )\n          }\n        </ul>\n      </div>\n    );\n  }\n}\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n      </header>\n      <Songs></Songs>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}